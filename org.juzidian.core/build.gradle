configurations {
	generate
}

dependencies {
	compile project(':org.juzidian.cedict')
	generate project(':org.juzidian.build')
}

def genSrcDir = "$buildDir/generated/java"

sourceSets {
    main {
        java {
            srcDirs "$genSrcDir"
        }
    }
}

task generateSources (type: JavaExec) {
	ext.srcFile = file('../cedict_1_0_ts_utf-8_mdbg.txt')
	ext.destDir = new File("$genSrcDir")
	inputs.file srcFile
	outputs.dir destDir
	classpath = configurations.generate
	main = 	'org.juzidian.build.PinyinHelperGenerator'
	args srcFile, destDir, 'org.juzidian.core'
}

compileJava.dependsOn generateSources
